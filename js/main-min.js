!function($){var e;$.getJSON("json/data.json",(function(t){e=t;for(var n=new ScrollMagic.Controller,s=e.length,o=0,r=0,a=0,i=0,l=0,d=0;d<e.length;d++)for(var c=e[d].questionAnswers,p=0;p<c.length;p++)c[p].answerIsTrue&&l++;function u(){$(".nb-question").html(s),$(".nb-correct").html(r),$(".percent-correct").html(a),$(".nb-points").html(i),$(".nb-points-possibles").html(l),o===s&&$(".warning").fadeOut()}console.log("Le nombre de points possibles est : "+l),u(),function(e){var t=$("#question-template").html(),n=Handlebars.compile(t),s=e.map((function(t,n){return{...t,index:n,totalQuestions:e.length}})),o=n({question:s});$(".questions").prepend(o)}(e),$(".answer").on("click",(function(){if(!$(this).closest(".question").hasClass("answered")){o+=1;var t=$(this).closest(".question").attr("id").replace("q",""),n=$(this).index(),i=e[t].questionAnswers[n].answerIsTrue,l=e[t].questionHint;i?($(this).addClass("correct"),l&&$(this).closest(".question").find(".hint").html('<span class="font-semibold underline decoration-2">Explications:</span> '+l),r+=1):($(this).addClass("error"),$(this).closest(".question").find(".answer").each((function(){e[t].questionAnswers[$(this).index()].answerIsTrue&&$(this).addClass("correct")})),l&&$(this).closest(".question").find(".hint").html('<span class="font-semibold underline decoration-2">Explications:</span> '+l)),$(this).closest(".question").addClass("answered"),a=(100/s*r).toFixed(2),u()}})),$(".submit").on("click",(function(){if(!$(this).parent().parent().hasClass("answered")){o+=1;var t=$(this).index(".submit"),n=e[t].questionHint,l=e[t].questionAnswers,d=$.map(l,(function(e){if(e.answerIsTrue)return e.answerTxt})),c=d.join(" et ");c=c.toLowerCase(),console.log(c);var p=$(this).parent().find(".dropdown-a").val(),h=$(this).parent().find(".dropdown-b").val(),f=p+" et "+h;f=f.toLowerCase();var w=h+" et "+p;w=w.toLowerCase(),d.includes(p)?($(this).parent().find(".dropdown-a").addClass("correct"),$(this).parent().find(".dropdown-a").prop("disabled",!0),i+=1):($(this).parent().find(".dropdown-a").addClass("error"),$(this).parent().find(".dropdown-a").prop("disabled",!0)),d.includes(h)&&p!==h?($(this).parent().find(".dropdown-b").addClass("correct"),$(this).parent().find(".dropdown-b").prop("disabled",!0),i+=1):($(this).parent().find(".dropdown-b").addClass("error"),$(this).parent().find(".dropdown-b").prop("disabled",!0)),n&&$(this).closest(".question").find(".hint").html('<span class="font-semibold underline decoration-2">Explications:</span> '+n),f===c||w===c?(r+=1,n&&$(this).closest(".question").find(".hint").html('<span class="correct-txt font-semibold underline decoration-2">Correct:</span> '+n)):n&&$(this).closest(".question").find(".hint").html('<span class="error-txt font-semibold underline decoration-2">Erreur:</span> '+n),$(this).parent().parent().addClass("answered"),a=(100/s*r).toFixed(2),u()}}));var h=$(".sumup"),f=$(".gauge"),w=f.find(".gauge-cursor"),m=f.find(".gauge-bg"),g=h.find(".nb-results"),b=h.find(".percent-results"),x=h.find(".points-results"),q=h.find(".final-text"),A=h.find(".btn-redo"),O=h.find(".btn-shar");(new TimelineMax).set(h,{autoAlpha:.3,transformOrigin:"center center"}).set(m,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(w,{autoAlpha:0,y:"-=20px",transformOrigin:"center center"}).set(g,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(b,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(x,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(q,{autoAlpha:0,transformOrigin:"center center"}).set(A,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"}).set(O,{autoAlpha:0,y:"-=10px",transformOrigin:"center center"});var y=!1;function C(){$(".nb-correct").counterUp({delay:10,time:1e3})}function v(){$(".percent-correct").counterUp({delay:10,time:1e3})}function I(){$(".nb-points").counterUp({delay:10,time:1e3})}new ScrollMagic.Scene({triggerElement:".gauge"}).on("enter",(function(e){o===s&&(0==y&&(100==a&&(a=95),new TimelineMax({paused:!0}).to(h,.3,{autoAlpha:1,ease:Power4.easeInOut}).to(m,1,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut}).to(w,.5,{autoAlpha:1,y:"+=20px",ease:Power4.easeInOut,onComplete:C},"-=0.5").to(g,.3,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut}).to(w,2,{left:a+"%",ease:Power4.easeInOut,onComplete:v}).to(b,.3,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut}).to(x,.3,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut,onComplete:I}).to(q,.3,{autoAlpha:1,ease:Power4.easeInOut},"+=1.5").to(A,.7,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut},"+=1.7").to(O,.7,{autoAlpha:1,y:"+=10px",ease:Power4.easeInOut}).play(),y=!0))})).triggerHook(.6).addTo(n),$(".btn-shar").on("click",(function(){$(".aside-r-toggle").click()}))})).fail((function(e,t,n){console.error("No quiz data found",t,n)})),window.scrollTo(0,0),setTimeout((function(){$("body").addClass("is-visible")}),1e3),Handlebars.registerHelper("indexFormatter",(function(e){return e+1})),Handlebars.registerHelper("isEqual",(function(e,t,n){return e===t?n.fn(this):n.inverse(this)}))}(jQuery);